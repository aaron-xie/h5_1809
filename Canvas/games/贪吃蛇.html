<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>贪吃蛇</title>
    <script>
    window.onload = function() {
        var arr = [42, 41],
            dz = 43,
            fx = 1,
            n, ctx = document.getElementById("can").getContext("2d");
        function draw(t, c) {
            ctx.fillStyle = c;
            ctx.fillRect(t % 20 * 20 + 1, parseInt(t / 20) * 20 + 1, 18, 18);
        }
        document.onkeydown = function(e) {
            fx = arr[1] - arr[0] == (n = [-1, -20, 1, 20][(e || event).keyCode - 37] || fx) ? fx : n
        };
        ! function() {
            arr.unshift(n = arr[0] + fx);
            if (arr.indexOf(n, 1) > 0 || n < 0 || n > 399 || fx == 1 && n % 20 == 0 || fx == -1 && n % 20 == 19) return alert("GAME OVER");
            draw(n, "Lime");
            if (n == dz) {
                while (arr.indexOf(dz = parseInt(Math.random() * 400)) >= 0);
                draw(dz, "Yellow");
            } else
                draw(arr.pop(), "Black");
            setTimeout(arguments.callee, 130);
        }();
    }
    </script>
</head>

<body>
    <canvas id="can" width="400" height="400" style="background:Black"></canvas>
</body>
</html
